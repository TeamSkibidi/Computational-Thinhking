<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S√°ch L·ªÖ H·ªôi Vi·ªát Nam - Immersive Background</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">

    <style>
        :root {
            --book-width: 90vw; 
            --book-height: 85vh;
            --page-duration: 2s; 
            /* M√†u m·∫∑c ƒë·ªãnh */
            --theme-primary: #8B0000;
            --theme-text: #FCD34D;
            --theme-bg: #fffbf0;
        }

        body {
            margin: 0;
            overflow: hidden;
            font-family: 'Merriweather', serif;
            background-color: var(--theme-bg); 
            transition: background-color 2s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        /* --- THEME CLASSES --- */
        .theme-tet { --theme-primary: #D70018; --theme-text: #FFD700; --theme-bg: #fff0f0; }
        .theme-trungthu { --theme-primary: #1e3a8a; --theme-text: #fbbf24; --theme-bg: #f0f4f8; }
        .theme-culture { --theme-primary: #6b21a8; --theme-text: #7e22ce; --theme-bg: #f3e8ff; }
        .theme-river { --theme-primary: #047857; --theme-text: #059669; --theme-bg: #ecfdf5; }
        .theme-dance { --theme-primary: #b91c1c; --theme-text: #fbbf24; --theme-bg: #fff1f2; }

        /* --- KHUNG S√ÅCH CH√çNH --- */
        .book-wrapper {
            width: var(--book-width);
            height: var(--book-height);
            position: relative;
            display: flex;
            perspective: 3000px; 
            background: #fff;
            box-shadow: 0 30px 60px -10px rgba(0,0,0,0.3), 0 10px 20px -5px rgba(0,0,0,0.1);
            border-radius: 4px;
        }

        /* --- G√ÅY S√ÅCH (SPINE) --- */
        .book-spine {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 40px;
            transform: translateX(-50%);
            z-index: 30;
            pointer-events: none;
            background: linear-gradient(to right, 
                rgba(0,0,0,0) 0%, 
                rgba(0,0,0,0.05) 20%,
                rgba(0,0,0,0.2) 45%,
                rgba(0,0,0,0.25) 50%, 
                rgba(0,0,0,0.2) 55%,
                rgba(0,0,0,0.05) 80%, 
                rgba(0,0,0,0) 100%
            );
        }
        
        .book-spine::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 0; bottom: 0;
            width: 1px;
            background: rgba(0,0,0,0.15);
        }

        /* --- C·∫§U TR√öC TRANG --- */
        .static-page {
            width: 50%;
            height: 100%;
            position: absolute;
            top: 0;
            overflow: hidden;
            background: var(--theme-bg);
            transition: background 1s;
        }

        .static-left { left: 0; z-index: 1; }
        .static-right { right: 0; z-index: 1; }

        /* Trang ƒëang l·∫≠t (The Flipper) */
        .flipper {
            position: absolute;
            top: 0;
            left: 50%;
            width: 50%;
            height: 100%;
            transform-origin: 0% 50%; 
            transform-style: preserve-3d;
            z-index: 20;
            pointer-events: none;
        }

        .flipper-face {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            backface-visibility: hidden;
            overflow: hidden;
            background: var(--theme-bg);
            border-left: 1px solid rgba(0,0,0,0.05); 
        }

        .flipper-front {
            z-index: 2;
            transform: rotateY(0deg);
        }
        
        .flipper-front::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to left, rgba(0,0,0,0), rgba(0,0,0,0.3));
            opacity: 0;
            transition: opacity 0.5s;
        }

        .flipper-back {
            z-index: 1;
            transform: rotateY(180deg);
        }
        
        .flipper-back::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to right, rgba(0,0,0,0.3), rgba(0,0,0,0));
            opacity: 0;
        }

        @keyframes flipStorybook {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(-180deg); }
        }

        .is-flipping {
            animation: flipStorybook var(--page-duration) cubic-bezier(0.645, 0.045, 0.355, 1) forwards;
        }
        
        .is-flipping .flipper-front::after {
            animation: shadowFront var(--page-duration) cubic-bezier(0.645, 0.045, 0.355, 1) forwards;
        }
        .is-flipping .flipper-back::after {
            animation: shadowBack var(--page-duration) cubic-bezier(0.645, 0.045, 0.355, 1) forwards;
        }

        @keyframes shadowFront {
            0% { opacity: 0; }
            50% { opacity: 0.4; }
            100% { opacity: 0; }
        }
        @keyframes shadowBack {
            0% { opacity: 0.4; }
            50% { opacity: 0.1; }
            100% { opacity: 0; }
        }

        /* --- CONTENT STYLES --- */
        .page-content { height: 100%; width: 100%; position: relative; }
        
        .image-container {
            width: 100%; height: 100%;
            background-size: cover; background-position: center;
            position: relative;
        }
        .image-overlay {
            position: absolute; bottom: 0; left: 0; right: 0; padding: 40px;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            color: white;
        }

        .text-container {
            padding: 60px 50px; height: 100%;
            display: flex; flex-direction: column; justify-content: center;
        }

        .navbar {
            position: fixed; top: 0; left: 0; width: 100%;
            padding: 20px 40px; display: flex; justify-content: space-between;
            z-index: 100; pointer-events: none;
        }
        .nav-content { pointer-events: auto; }

        /* --- C·∫¨P NH·∫¨T CSS CHO N√öT ƒêEN --- */
        .btn-glass {
            /* N·ªÅn t·ªëi nh·∫π ƒë·ªÉ n·ªïi tr√™n n·ªÅn s√°ng */
            background: rgba(0,0,0,0.05); 
            backdrop-filter: blur(8px);
            /* Vi·ªÅn x√°m */
            border: 1px solid rgba(0,0,0,0.1); 
            /* Ch·ªØ m√†u ƒëen */
            color: #1f2937; 
            border-radius: 50%; width: 40px; height: 40px;
            display: flex; align-items: center; justify-content: center;
            transition: 0.3s; cursor: pointer;
        }
        /* Hover th√¨ chuy·ªÉn th√†nh ƒëen ƒë·∫≠m, ch·ªØ tr·∫Øng */
        .btn-glass:hover { background: #1f2937; color: white; }

        h1 { font-family: 'Playfair Display', serif; }
        
        .particle {
            position: fixed; pointer-events: none; z-index: 60;
            animation: floatDown linear forwards;
        }
        @keyframes floatDown {
            to { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

    </style>
</head>
<body>

    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="nav-content flex gap-4">
            <button class="btn-glass"><i data-lucide="arrow-left"></i></button>
            <button class="btn-glass"><i data-lucide="list"></i></button>
            <button class="btn-glass"><i data-lucide="filter"></i></button>
        </div>
        <div class="nav-content flex gap-2 w-1/3">
            <!-- C·∫¨P NH·∫¨T TAILWIND CLASS CHO THANH T√åM KI·∫æM (M√†u ƒëen/x√°m) -->
            <input type="text" placeholder="T√¨m ki·∫øm s·ª± ki·ªán..." 
                   class="w-full bg-black/5 backdrop-blur-md border border-black/10 rounded-full px-5 py-2 text-gray-800 placeholder-gray-500 focus:outline-none focus:bg-white/40 focus:border-black/20 transition">
        </div>
    </nav>

    <!-- BOOK WRAPPER -->
    <div class="book-wrapper" id="bookWrapper">
        
        <!-- G√ÅY S√ÅCH (STORYBOOK SPINE) -->
        <div class="book-spine"></div>

        <div class="static-page static-left" id="staticLeft"></div>
        <div class="static-page static-right" id="staticRight"></div>

        <!-- FLIPPER s·∫Ω ƒë∆∞·ª£c JS t·∫°o ra -->
    </div>

    <script>
        const festivals = [
            {
                id: 1,
                name: "T·∫øt Nguy√™n ƒê√°n",
                date: "01 - 03 Th√°ng 1 (√Çm L·ªãch)",
                loc: "To√†n Qu·ªëc",
                theme: "theme-tet",
                img: "images/T·∫øt.jpg", 
                desc: "Ch√†o ƒë√≥n nƒÉm m·ªõi v·ªõi s·∫Øc ƒë·ªè may m·∫Øn, b√°nh ch∆∞ng xanh v√† nh·ªØng phong bao l√¨ x√¨ ƒë·ªè th·∫Øm. Th·ªùi kh·∫Øc thi√™ng li√™ng ƒë·ªÉ gia ƒë√¨nh ƒëo√†n t·ª•.",
                tags: ["Truy·ªÅn th·ªëng", "Gia ƒë√¨nh"],
                particle: "üå∏"
            },
            {
                id: 2,
                name: "T·∫øt Trung Thu",
                date: "15 Th√°ng 8 (√Çm L·ªãch)",
                loc: "H·ªôi An & To√†n qu·ªëc",
                theme: "theme-trungthu",
                img: "images/Trung_Thu.jpg",
                desc: "ƒê√™m h·ªôi trƒÉng r·∫±m, tr·∫ª em r∆∞·ªõc ƒë√®n √¥ng sao, xem m√∫a l√¢n s∆∞ r·ªìng. Ph·ªë c·ªï H·ªôi An t·∫Øt ƒë√®n ƒëi·ªán, ch·ªâ c√≤n √°nh n·∫øn lung linh tr√™n s√¥ng.",
                tags: ["Tr·∫ª em", "VƒÉn h√≥a"],
                particle: "‚≠ê"
            },
            {
                id: 3,
                name: "L·ªÖ H·ªôi ph√°o hoa",
                date: "31/5 v√† 12/7",
                loc: "ƒê√† N·∫µng",
                theme: "theme-culture",
                img: "images/Ph√°o_Hoa_ƒê√†_N·∫µng.jpg",
                desc: "C√°c m√†n tr√¨nh di·ªÖn ph√°o hoa t·ª´ c√°c ƒë·ªôi qu·ªëc t·∫ø v√† ƒë·ªôi Vi·ªát Nam",
                tags: ["Ngh·ªá thu·∫≠t"],
                particle: "üéÜ"
            },
            {
                id: 4,
                name: "L·ªÖ H·ªôi Nh·∫£y L·ª≠a",
                date: "Ng√†y 16/10",
                loc: "H√† Giang",
                theme: "theme-dance",
                img: "images/Nh·∫£y_L·ª≠a.jpg",
                desc: "L·ªÖ h·ªôi n√†y c√≥ √Ω nghƒ©a t√¢m linh s√¢u s·∫Øc, th·ªÉ hi·ªán s·ª©c m·∫°nh con ng∆∞·ªùi tr∆∞·ªõc thi√™n nhi√™n v√† l√† d·ªãp ƒë·ªÉ t·∫° ∆°n tr·ªùi ƒë·∫•t, c·∫ßu ch√∫c m√πa m√†ng b·ªôi thu v√† xua ƒëu·ªïi t√† ma, b·ªánh t·∫≠t. ",
                tags: ["Th·ªÉ thao"],
                particle: "üî•"
            }
        ];

        let currentIndex = 0;
        let isAnimating = false;
        const bookWrapper = document.getElementById('bookWrapper');
        const staticLeft = document.getElementById('staticLeft');
        const staticRight = document.getElementById('staticRight');
        
        function getImageHTML(data) {
            return `
                <div class="image-container" style="background-image: url('${data.img}')">
                    <div class="image-overlay">
                        <div class="text-sm font-bold tracking-widest uppercase opacity-80 mb-2">${data.loc}</div>
                        <div class="text-3xl font-serif flex items-center gap-2">
                             <i data-lucide="calendar"></i> ${data.date}
                        </div>
                    </div>
                </div>
            `;
        }

        function getTextHTML(data) {
            return `
                <div class="text-container ${data.theme}">
                    <div class="flex gap-2 mb-4">
                        ${data.tags.map(t => `<span class="px-3 py-1 bg-black/5 rounded text-xs font-bold uppercase text-[var(--theme-primary)] border border-[var(--theme-primary)]/20">${t}</span>`).join('')}
                    </div>
                    <h1 class="text-5xl font-bold mb-6 text-[var(--theme-primary)] leading-tight">${data.name}</h1>
                    <p class="text-lg leading-loose text-gray-700 text-justify">${data.desc}</p>
                    <div class="mt-8">
                        <button class="px-6 py-3 bg-[var(--theme-primary)] text-white rounded shadow-lg hover:shadow-xl transition transform hover:-translate-y-1 flex items-center gap-2">
                            Xem chi ti·∫øt <i data-lucide="arrow-right" width="16"></i>
                        </button>
                    </div>
                </div>
            `;
        }

        // --- C·∫≠p nh·∫≠t m√†u n·ªÅn Body ---
        function updateBodyTheme(themeClass) {
            document.body.className = themeClass; // G√°n class theme cho body ƒë·ªÉ l·∫•y --theme-bg
        }

        function init() {
            renderStaticPage(currentIndex, currentIndex);
            lucide.createIcons();
            startParticles(festivals[currentIndex].particle);
            
            // Kh·ªüi t·∫°o m√†u n·ªÅn ban ƒë·∫ßu
            updateBodyTheme(festivals[currentIndex].theme);
            
            setInterval(flipToNext, 5000);
        }

        function renderStaticPage(leftIndex, rightIndex) {
            staticLeft.innerHTML = getImageHTML(festivals[leftIndex]);
            staticRight.innerHTML = getTextHTML(festivals[rightIndex]);
            staticLeft.className = `static-page static-left ${festivals[leftIndex].theme}`;
            staticRight.className = `static-page static-right ${festivals[rightIndex].theme}`;
        }

        function flipToNext() {
            if (isAnimating) return;
            isAnimating = true;

            const nextIndex = (currentIndex + 1) % festivals.length;
            const currentData = festivals[currentIndex];
            const nextData = festivals[nextIndex];

            // C·∫≠p nh·∫≠t m√†u n·ªÅn NGAY KHI b·∫Øt ƒë·∫ßu l·∫≠t ƒë·ªÉ t·∫°o hi·ªáu ·ª©ng chuy·ªÉn c·∫£nh
            updateBodyTheme(nextData.theme);

            staticRight.innerHTML = getTextHTML(nextData);
            staticRight.className = `static-page static-right ${nextData.theme}`;
            
            const flipper = document.createElement('div');
            flipper.className = 'flipper is-flipping';
            
            const front = document.createElement('div');
            front.className = `flipper-face flipper-front ${currentData.theme}`;
            front.innerHTML = getTextHTML(currentData);
            
            const back = document.createElement('div');
            back.className = `flipper-face flipper-back ${nextData.theme}`;
            back.innerHTML = getImageHTML(nextData);

            flipper.appendChild(front);
            flipper.appendChild(back);
            bookWrapper.appendChild(flipper);
            lucide.createIcons();

            setTimeout(() => startParticles(nextData.particle), 500);

            setTimeout(() => {
                staticLeft.innerHTML = getImageHTML(nextData);
                staticLeft.className = `static-page static-left ${nextData.theme}`;
                flipper.remove();
                currentIndex = nextIndex;
                isAnimating = false;
                lucide.createIcons();
            }, 2000);
        }

        function startParticles(char) {
            document.querySelectorAll('.particle').forEach(el => el.remove());
            for(let i=0; i<10; i++) {
                setTimeout(() => {
                    const p = document.createElement('div');
                    p.className = 'particle';
                    p.innerText = char;
                    p.style.left = Math.random() * 100 + 'vw';
                    p.style.top = '-50px';
                    p.style.fontSize = (Math.random() * 20 + 10) + 'px';
                    p.style.animationDuration = (Math.random() * 3 + 5) + 's';
                    document.body.appendChild(p);
                }, i * 400);
            }
        }

        init();
    </script>
</body>
</html>